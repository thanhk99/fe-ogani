<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <h2>Đặt Lại Mật Khẩu</h2>
      <p>Nhập mật khẩu mới cho tài khoản</p>
      <p class="email-info">Email: <strong>{{ userEmail }}</strong></p>
    </div>

    <form [formGroup]="passwordForm" (ngSubmit)="onSubmitPassword()" class="login-form">
      <div class="form-group">
        <label for="matkhau">Mật khẩu mới</label>
        <div class="password-input-group">
          <input [type]="showNewPassword ? 'text' : 'password'" id="matkhau" formControlName="matkhau" class="form-control"
                 placeholder="Nhập mật khẩu mới" />
          <button type="button" class="password-toggle-btn" (click)="toggleNewPasswordVisibility()">
            <i class="pi" [ngClass]="showNewPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Xác nhận mật khẩu</label>
        <div class="password-input-group">
          <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword" formControlName="confirmPassword" class="form-control"
                 placeholder="Nhập lại mật khẩu" />
          <button type="button" class="password-toggle-btn" (click)="toggleConfirmPasswordVisibility()">
            <i class="pi" [ngClass]="showConfirmPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
          </button>
        </div>
      </div>

      <div *ngIf="passwordForm.errors?.['passwordMismatch']" class="alert alert-danger">
        Mật khẩu xác nhận không khớp
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

      <button type="submit" class="btn btn-primary btn-block" [disabled]="loading">
        <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
        {{ loading ? 'Đang xử lý...' : 'Đặt lại mật khẩu' }}
      </button>

      <div class="back-link">
        <p><a routerLink="/forgot-email">Quay lại nhập email</a></p>
      </div>
    </form>
  </div>
</div>