<div class="order-container">
  <h2>Qu·∫£n l√Ω ƒë∆°n h√†ng</h2>
  
  <div *ngIf="listOrder.length === 0" class="no-orders">
    <p>Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o</p>
  </div>
  
  <div class="order-list">
    <div *ngFor="let order of listOrder" class="order-item">
      <div class="order-header">
        <h3>ƒê∆°n h√†ng #{{order?.id || 'N/A'}}</h3>
        <span class="status-badge" [class]="getStatusClass(order?.orderStatus)">
          {{getStatusText(order?.orderStatus)}}
        </span>
      </div>
      
      <div class="order-details">
        <p><strong>Kh√°ch h√†ng:</strong> {{getCustomerFullName(order)}}</p>
        <p><strong>Email:</strong> {{order?.email || 'N/A'}}</p>
        <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> {{order?.phone || 'N/A'}}</p>
        <p><strong>ƒê·ªãa ch·ªâ:</strong> {{order?.address || 'N/A'}}</p>
        <p><strong>T·ªïng ti·ªÅn:</strong> {{order?.totalPrice | currency:'VND':'symbol':'1.0-0'}}</p>
        
        <!-- Th√™m tr∆∞·ªùng ng√†y thanh to√°n -->
        <p><strong>Ng√†y thanh to√°n:</strong> 
          <span [class]="order?.orderStatus === 'PAID' ? 'payment-date paid' : 'payment-date not-paid'">
            {{formatDate(getPaymentDate(order))}}
          </span>
        </p>
        
        <p><strong>Ghi ch√∫:</strong> {{order?.note || 'Kh√¥ng c√≥ ghi ch√∫'}}</p>
      </div>

      <div class="order-actions">
        <!-- N√∫t hu·ª∑ - ch·ªâ hi·ªÉn th·ªã khi orderStatus l√† PENDING -->
        <button *ngIf="order?.orderStatus === 'PENDING'" 
                (click)="onStatusButtonClick(order, 'cancel')"
                class="btn btn-cancel">
          ‚ùå Hu·ª∑ ƒë∆°n h√†ng
        </button>

        <!-- N√∫t x√°c nh·∫≠n - ch·ªâ hi·ªÉn th·ªã khi orderStatus l√† CONFIRMED -->
        <button *ngIf="order?.orderStatus === 'CONFIRMED'" 
                (click)="onStatusButtonClick(order, 'confirm')"
                [disabled]="isButtonDisabled(order?.orderStatus)"
                class="btn btn-confirm">
          X√°c nh·∫≠n ƒë∆°n h√†ng
        </button>

        <!-- N√∫t b·∫Øt ƒë·∫ßu giao - ch·ªâ hi·ªÉn th·ªã khi orderStatus l√† PAID -->
        <button *ngIf="order?.orderStatus === 'PAID'" 
                (click)="onStatusButtonClick(order, 'ship')"
                [disabled]="isButtonDisabled(order?.orderStatus)"
                class="btn btn-ship">
          B·∫Øt ƒë·∫ßu giao h√†ng
        </button>

        <!-- N√∫t ho√†n th√†nh - ch·ªâ hi·ªÉn th·ªã khi orderStatus l√† SHIPPING -->
        <button *ngIf="order?.orderStatus === 'SHIPPING'" 
                (click)="onStatusButtonClick(order, 'complete')"
                [disabled]="isButtonDisabled(order?.orderStatus)"
                class="btn btn-complete">
          Ho√†n th√†nh ƒë∆°n h√†ng
        </button>

        <!-- Hi·ªÉn th·ªã th√¥ng b√°o cho c√°c tr·∫°ng th√°i kh√¥ng th·ªÉ thao t√°c -->
        <span *ngIf="isButtonDisabled(order?.orderStatus) && order?.orderStatus && order?.orderStatus !== 'PENDING'" 
              class="no-action-text">
          Kh√¥ng th·ªÉ thao t√°c
        </span>

        <!-- N√∫t xem chi ti·∫øt - LU√îN hi·ªÉn th·ªã -->
        <button (click)="viewOrderDetail(order.id)" 
                class="btn btn-detail">
          üëÅÔ∏è Xem chi ti·∫øt
        </button>
      </div>
    </div>
  </div>
</div>